<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boss Respawn Timer</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
  padding: 20px;
}

h1 {
  text-align: center;
}

.boss {
  background: #222;
  border-radius: 8px;
  padding: 15px;
  margin: 15px auto;
  max-width: 600px;
}

.timer {
  margin-top: 10px;
  font-weight: bold;
}

.spawned { color: #4caf50; }
.soon { color: #ffc107; }
.wait { color: #f44336; }

button {
  margin-top: 8px;
  margin-right: 5px;
  padding: 6px 10px;
  cursor: pointer;
}
</style>
</head>

<body>

<h1>Boss Respawn Timer</h1>
<div id="bossList"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
  getFirestore,
  doc,
  setDoc,
  onSnapshot
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* ðŸ”¥ FIREBASE CONFIG â€” REPLACE WITH YOUR OWN ðŸ”¥ */
const firebaseConfig = {
  apiKey: "AIzaSyBbINsazxCJkEHBwySyrQ4FLZhdHC85Cyw",
  authDomain: "boss-respawn-timer.firebaseapp.com",
  projectId: "boss-respawn-timer",
  storageBucket: "boss-respawn-timer.firebasestorage.app",
  messagingSenderId: "767083470052",
  appId: "1:767083470052:web:17d7453fe66700321760f1",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ================= ADMIN ================= */
const isAdmin = new URLSearchParams(window.location.search).get("admin") === "1";

/* ================= BOSSES ================= */
const bosses = [
  { name: "Venatus", level: 60, location: "Corrupted Basin", respawnHours: 10 },
  { name: "Viorent", level: 65, location: "Crescent Lake", respawnHours: 10 },
  { name: "Ego", level: 70, location: "Ulan Canyon", respawnHours: 21 },
  { name: "Livera", level: 75, location: "Protectors Ruins", respawnHours: 24 },
  { name: "Araneo", level: 75, location: "Lower Tomb of Tyriosa 1F", respawnHours: 24 },
  { name: "Undomiel", level: 80, location: "Secret Lab", respawnHours: 24 },
  { name: "Lady Dalia", level: 85, location: "Twilight Hill", respawnHours: 18 },
  { name: "General Aquleus", level: 85, location: "Lower Tomb of Tyriosa 2F", respawnHours: 29 },
  { name: "Amentis", level: 88, location: "Land of Glory", respawnHours: 29 },
  { name: "Baron Braudmore", level: 88, location: "Battlefield of Templar", respawnHours: 32 }
];

/* ================= DATA ================= */
let bossData = {};

/* ================= FIREBASE LISTENERS ================= */
function listenBoss(boss) {
  const ref = doc(db, "bosses", boss.name);
  onSnapshot(ref, snap => {
    if (snap.exists()) {
      bossData[boss.name] = snap.data();
      render();
    }
  });
}

/* ================= ACTIONS ================= */
function markKilled(boss) {
  setDoc(doc(db, "bosses", boss.name), {
    lastKill: Date.now(),
    respawnMs: boss.respawnHours * 3600000
  });
}

function resetBoss(name) {
  setDoc(doc(db, "bosses", name), {
    lastKill: 0,
    respawnMs: 0
  });
}

/* ================= TIMER ================= */
function remaining(boss) {
  const data = bossData[boss.name];
  if (!data || !data.lastKill) return null;
  return data.lastKill + data.respawnMs - Date.now();
}

function format(ms) {
  if (ms <= 0) return "SPAWNED / CHECK NOW";
  const h = Math.floor(ms / 3600000);
  const m = Math.floor((ms % 3600000) / 60000);
  const s = Math.floor((ms % 60000) / 1000);
  return `${h}h ${m}m ${s}s`;
}

/* ================= UI ================= */
function render() {
  const list = document.getElementById("bossList");
  list.innerHTML = "";

  bosses.forEach(boss => {
    const r = remaining(boss);
    let color = "wait";
    if (r === null || r <= 0) color = "spawned";
    else if (r < 3600000) color = "soon";

    const div = document.createElement("div");
    div.className = "boss";
    div.innerHTML = `
      <strong>${boss.name}</strong> (Lv ${boss.level})<br>
      <em>${boss.location}</em>
      <div class="timer ${color}">
        ${r === null ? "Not killed yet" : format(r)}
      </div>
      ${isAdmin ? `
        <button onclick='markKilled(${JSON.stringify(boss)})'>Boss Killed</button>
        <button onclick='resetBoss("${boss.name}")'>Reset</button>
      ` : ""}
    `;
    list.appendChild(div);
  });
}

/* ================= START ================= */
bosses.forEach(listenBoss);
setInterval(render, 1000);
</script>


</body>
</html>


