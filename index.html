<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boss Respawn Timer</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
  padding: 20px;
}

h1 {
  text-align: center;
}

.boss {
  background: #222;
  border-radius: 8px;
  padding: 15px;
  margin: 15px auto;
  max-width: 600px;
}

button {
  margin-top: 10px;
  padding: 8px 12px;
  cursor: pointer;
}

.timer {
  margin-top: 10px;
  font-weight: bold;
}
</style>
</head>

<body>

<h1>Boss Respawn Timer</h1>
<div id="bossList"></div>

<script>
// ================== ADMIN MODE ==================
const isAdmin = new URLSearchParams(window.location.search).get("admin") === "1";

// ================== BOSS CONFIG ==================
const bosses = [
  { name: "Venatus", level: 60, location: "Corrupted River Stream", respawnHours: 10 },
  { name: "Viorent", level: 65, location: "Gill Stream", respawnHours: 10 },
  { name: "Ego", level: 70, location: "Reclaimed Gathering Point", respawnHours: 21 },
  { name: "Livera", level: 75, location: "Black Storm Peninsula", respawnHours: 24 },
  { name: "Araneo", level: 75, location: "Lower Tomb of Tyriosa 1F", respawnHours: 24 },
  { name: "Undomiel", level: 80, location: "Test Subject Lab", respawnHours: 24 },
  { name: "Lady Dalia", level: 85, location: "Bloody Shadow", respawnHours: 18 },
  { name: "General Aquleus", level: 85, location: "Lower Tomb of Tyriosa 2F", respawnHours: 29 },
  { name: "Amentis", level: 88, location: "Limestone Cape", respawnHours: 29 },
  { name: "Baron Braudmore", level: 88, location: "Rosevine Bridge", respawnHours: 32 }
];

// ================== STORAGE ==================
let bossData = {};

function loadData() {
  const saved = localStorage.getItem("bossData");
  bossData = saved ? JSON.parse(saved) : {};
}

function saveData() {
  localStorage.setItem("bossData", JSON.stringify(bossData));
}

// ================== TIMER LOGIC ==================
function markKilled(boss) {
  const nextSpawn = Date.now() + boss.respawnHours * 3600000;
  bossData[boss.name] = nextSpawn;
  saveData();
}

function timeRemaining(timestamp) {
  if (!timestamp) return "Not killed yet";

  const diff = timestamp - Date.now();
  if (diff <= 0) return "SPAWNED / CHECK NOW";

  const h = Math.floor(diff / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);

  return `${h}h ${m}m ${s}s`;
}

// ================== UI RENDER ==================
function render() {
  const list = document.getElementById("bossList");
  list.innerHTML = "";

  bosses.forEach(boss => {
    const div = document.createElement("div");
    div.className = "boss";

    div.innerHTML = `
      <strong>${boss.name}</strong> (Lv ${boss.level})<br>
      <em>${boss.location}</em><br>
      Respawn: ${boss.respawnHours} hours

      <div class="timer">
        Next Spawn In: ${timeRemaining(bossData[boss.name])}
      </div>

      ${isAdmin ? `<button onclick='markKilled(${JSON.stringify(boss)})'>Boss Killed</button>` : ""}
    `;

    list.appendChild(div);
  });
}

// ================== INIT ==================
loadData();
render();
setInterval(render, 1000);
</script>

</body>
</html>
