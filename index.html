<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boss Respawn Timer</title>
<style>
body { font-family: Arial, sans-serif; background:#111; color:#eee; padding:20px; }
h1 { text-align:center; }
.boss { background:#222; border-radius:8px; padding:15px; margin:15px auto; max-width:600px; }
button { margin-top:10px; padding:8px 12px; cursor:pointer; }
.timer { margin-top:10px; font-weight:bold; }
.admin { display:none; }
</style>
</head>
<body>

<h1>Boss Respawn Timer</h1>
<div id="bossList"></div>

<script>
// ================== CONFIG ==================
const ADMIN_PASSWORD = "CHANGE_THIS_PASSWORD";

const bosses = [
  { name: "Venatus", respawnHours: 10, nextSpawn: null },
  { name: "Viorent", respawnHours: 10, nextSpawn: null },
  { name: "Ego", respawnHours: 21, nextSpawn: null },
  { name: "Livera", respawnHours: 24, nextSpawn: null },
  { name: "Araneo", respawnHours: 24, nextSpawn: null },
  { name: "Undomiel", respawnHours: 24, nextSpawn: null },
  { name: "Lady Dalia", respawnHours: 18, nextSpawn: null },
  { name: "General Aquleus", respawnHours: 29, nextSpawn: null },
  { name: "Amentis", respawnHours: 29, nextSpawn: null },
  { name: "Baron Braudmore", respawnHours: 32, nextSpawn: null },
  { name: "Wanitas", respawnHours: 48, nextSpawn: null },
  { name: "Metus", respawnHours: 48, nextSpawn: null },
  { name: "Duplican", respawnHours: 48, nextSpawn: null },
  { name: "Shuliar", respawnHours: 35, nextSpawn: null },
  { name: "Gareth", respawnHours: 32, nextSpawn: null },
  { name: "Titore", respawnHours: 37, nextSpawn: null },
  { name: "Larba", respawnHours: 35, nextSpawn: null },
  { name: "Catena", respawnHours: 35, nextSpawn: null },
  { name: "Secreta", respawnHours: 62, nextSpawn: null },
  { name: "Ordo", respawnHours: 62, nextSpawn: null },
  { name: "Asta", respawnHours: 62, nextSpawn: null },
  { name: "Supore", respawnHours: 62, nextSpawn: null }
];

// ================== ADMIN CHECK ==================
const isAdmin = new URLSearchParams(window.location.search).get("admin") === "1";
let adminUnlocked = false;

if (isAdmin) {
  const pwd = prompt("Enter UGzFam:");
  if (pwd === ADMIN_PASSWORD) adminUnlocked = true;
}

// ================== STORAGE ==================
function save() {
  localStorage.setItem("bossData", JSON.stringify(bosses));
}
function load() {
  const data = localStorage.getItem("bossData");
  if (data) {
    const parsed = JSON.parse(data);
    parsed.forEach((b, i) => bosses[i].nextSpawn = b.nextSpawn);
  }
}

// ================== LOGIC ==================
function markKilled(i) {
  const now = new Date();
  bosses[i].nextSpawn = new Date(
    now.getTime() + bosses[i].respawnHours * 3600000
  ).toISOString();
  save();
}

function timeRemaining(dateStr) {
  if (!dateStr) return "Not killed yet";
  const diff = new Date(dateStr) - new Date();
  if (diff <= 0) return "SPAWNED / CHECK NOW";

  const h = Math.floor(diff / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);
  return `${h}h ${m}m ${s}s`;
}

// ================== UI ==================
function render() {
  const list = document.getElementById("bossList");
  list.innerHTML = "";

  bosses.forEach((b, i) => {
    const div = document.createElement("div");
    div.className = "boss";
    div.innerHTML = `
      <strong>${b.name}</strong><br>
      Respawn Time: ${b.respawnHours}h
      <div class="timer">Next Spawn In: ${timeRemaining(b.nextSpawn)}</div>
      ${adminUnlocked ? `<button onclick="markKilled(${i})">Boss Killed</button>` : ""}
    `;
    list.appendChild(div);
  });
}

// ================== INIT ==================
load();
render();
setInterval(render, 1000);
</script>

</body>
</html>
