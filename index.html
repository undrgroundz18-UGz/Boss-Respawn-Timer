<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boss Respawn Timer</title>

<style>
body {
  font-family: Arial, sans-serif;
  background:#111;
  color:#eee;
  padding:20px;
}
h1 { text-align:center; }
.boss {
  background:#222;
  border-radius:8px;
  padding:15px;
  margin:15px auto;
  max-width:600px;
}
button {
  margin-top:10px;
  padding:8px 12px;
  cursor:pointer;
}
.timer {
  margin-top:10px;
  font-weight:bold;
}
</style>
</head>

<body>

<h1>Boss Respawn Timer</h1>
<div id="bossList"></div>

<script>
// ================== CONFIG ==================
const bosses = [
  { name: "Venatus", respawnHours: 10 },
  { name: "Viorent", respawnHours: 10 },
  { name: "Ego", respawnHours: 21 },
  { name: "Livera", respawnHours: 24 },
  { name: "Araneo", respawnHours: 24 },
  { name: "Undomiel", respawnHours: 24 },
  { name: "Lady Dalia", respawnHours: 18 },
  { name: "General Aquleus", respawnHours: 29 },
  { name: "Amentis", respawnHours: 29 },
  { name: "Baron Braudmore", respawnHours: 32 },
  { name: "Wanitas", respawnHours: 48 },
  { name: "Metus", respawnHours: 48 },
  { name: "Duplican", respawnHours: 48 },
  { name: "Shuliar", respawnHours: 35 },
  { name: "Gareth", respawnHours: 32 },
  { name: "Titore", respawnHours: 37 },
  { name: "Larba", respawnHours: 35 },
  { name: "Catena", respawnHours: 35 },
  { name: "Secreta", respawnHours: 62 },
  { name: "Ordo", respawnHours: 62 },
  { name: "Asta", respawnHours: 62 },
  { name: "Supore", respawnHours: 62 }
];

// ================== ADMIN CHECK ==================
const isAdmin = new URLSearchParams(window.location.search).get("admin") === "1";

// ================== STORAGE ==================
let bossData = {};

function load() {
  const data = localStorage.getItem("bossData");
  bossData = data ? JSON.parse(data) : {};
}

function save() {
  localStorage.setItem("bossData", JSON.stringify(bossData));
}

// ================== LOGIC ==================
function markKilled(name, hours) {
  const nextSpawn = Date.now() + hours * 3600000;
  bossData[name] = nextSpawn;
  save();
}

function timeRemaining(ts) {
  if (!ts) return "Not killed yet";
  const diff = ts - Date.now();
  if (diff <= 0) return "SPAWNED / CHECK NOW";

  const h = Math.floor(diff / 3600000);
  const m = Math.floor((diff % 3600000) / 60000);
  const s = Math.floor((diff % 60000) / 1000);
  return `${h}h ${m}m ${s}s`;
}

// ================== UI ==================
function render() {
  const list = document.getElementById("bossList");
  list.innerHTML = "";

  bosses.forEach(b => {
    const div = document.createElement("div");
    div.className = "boss";

    div.innerHTML = `
      <strong>${b.name}</strong><br>
      Respawn: ${b.respawnHours} hours
      <div class="timer">
        Next Spawn In: ${timeRemaining(bossData[b.name])}
      </div>
      ${isAdmin ? `<button onclick="markKilled('${b.name}', ${b.respawnHours})">Boss Killed</button>` : ""}
    `;

    list.appendChild(div);
  });
}

// ================== INIT ==================
load();
render();
setInterval(render, 1000);
</script>

</body>
</html>
